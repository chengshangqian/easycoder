<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gbk" />
<title>开发文档</title>
<meta name="description" content="Easycoder代码生成器是一个基于Struts2、Spring2、Ibatis2的高效开发框架的在线代码生成器" />
<link rel="stylesheet" type="text/css" href="/css/common.css" />
<style type="text/css">
div.article{
border:1px #09F solid ;
padding:15px;
}
</style>
<script type="text/javascript">
	var vals = {};
    var name = "abc"
	function testGlobal() {
		//alert(name); //2处：undefined
		vals['place2'] = name;
		
		var name = "def";
		
		//alert(name); //3处：def
		vals['place3'] = name;
		
		//alert(this.name); //4处：abc
		vals['place4'] = this.name;
		
		this.name = "ghi";
		//alert(this.name); //5处：ghi
		vals['place5'] = this.name;
	}
    
	//alert(name); //1处：abc
	vals['place1'] = name;
	
	testGlobal();
	
	//alert(name); //6处：ghi
	vals['place6'] = name;

	window.onload = function(){
		for(var id in vals){
			var val = vals[id];
			document.getElementById(id).innerHTML = val;
		}
	};
</script>
</head>

<body>

	<div id="container">

		<div id="header">

			<div id="header-nav">

				<a href="/">首页</a> | <a href="/generatecode/index.ee" title="Struts2、Spring2、Ibatis2的高效开发框架的在线代码生成器">代码生成器</a> | <a href="/article/index.html">开发文档大全</a> | <a href="/changes.html">更新日志</a>

			</div>

			<a href="https://github.com/chengshangqian/easycoder/blob/master/README.md" title="关于Easycoder代码生成器"><img src="/images/cocoa-logo.jpg" alt="Cocoa" /></a>

		</div>

		<div id="main">
			<h1>JS作用域的一个小例子</h1>
			<p>这是一个可以帮助理解有关JS的作用域的小例子，一起分析一下是否对了</p>
			<p style="font-weight:700;">代码：</p>
			<div class="article">
			<div>var name = "abc"; //js会有一个预解析的过程,先执行函数里的变量声明,但不执行赋值 </div>
            <div>function testGlobal() {</div>
            <div>  // 所以这里查找变量的时候,搜索到函数里的name</div>
            <div>  // 此时有name的声明,就是下面那个,但是并没有执行赋值</div>
            <div>  // 所以是undefined</div>
            <div>  alert(name); //2处：undefined  </div>
            <div>  var name = "def"; </div>
            <div>  // 这里调用这个函数的时候,上面的赋值语句已经执行</div>
            <div>  // 所以是def</div>
            <div>  alert(name); //3处：def  </div>
            <div>  // this - 谁调用指向谁</div>
            <div>  // js里方法和对象是松散的耦合</div>
            <div>  // 多数情况下函数可以随意得绑定到别的对象上去运行</div>
            <div>  alert(this.name); //4处：abc  </div>
    
            <div>  this. name = "ghi"; </div> 
            <div>  alert(this.name); //5处：ghi</div>
            <div>}</div>
            <div>// 搜索变量找到全局作用域的 name</div>
            <div>alert(name); //1处：abc  </div>
            <div>// window直接调用这个方法</div>
            <div>testGlobal();  </div>
            <div>// 函数里this. name = "ghi"; 经过上面的函数执行实际是window.name='ghi';</div>
            <div>alert(name); //6处：ghi</div>
            </div>
            <p style="font-weight:700;">运行结果：</p>
            <div class="article">1处：<span id="place1"></span>,2处：<span id="place2"></span>,3处：<span id="place3"></span>,4处：<span id="place4"></span>,5处：<span id="place5"></span>,6处：<span id="place6"></span>
            </div>
			<div class="pageBottom"><a href="https://github.com/chengshangqian/easycoder/blob/master/README.md" target="_blank" title="Easycoder代码生成器"><img src="/images/cocoa-logo.jpg" alt="Easycoder代码生成器" style="width:60px;height:15px;"></a> <span title="Top" onclick="window.scrollTo(0,0);"></span></div>
		</div>

		<div id="footer">

			<div id="footer-body">
				<div id="copyright">Copyright &copy <a href="https://github.com/chengshangqian" target="_blank">作者</a>. All rights reserved. </div>
			</div>

		</div>	
		</div>

</body>

</html>