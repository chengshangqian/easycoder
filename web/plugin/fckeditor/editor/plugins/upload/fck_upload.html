
<html>
<head>
<title>文件上传</title>
</head>
<body>
<script language=javascript>
function getFileExt(filename) {
if (filename.indexOf(".")==-1) return "..";
var ext=filename.split(".");
return ext[ext.length-1];
}

function frmsubmit() {
	var filename=form1.attaFile.value;
	if (!filename=="") {
		filename=filename.toLowerCase();
		var validExt=".gif|.jpg|.png";
		var theExt=getFileExt(filename);
		if (validExt.indexOf(theExt)==-1) {
			alert("该文件只支持如下格式："+validExt);
			form1.file.focus();
			return;
		} else {
			document.form1.action="/file/uploadFile.do?action=insertFile";
			document.form1.submit();
		}
	} else {
		alert("请选择一个文件");
		form1.attaFile.focus();
	}
}

</script>
<form method="post" name="form1" enctype="multipart/form-data" action="/file/uploadFile.do?action=insertFile">
<input type="text" readonly="true" name="url" size="26"   value='' ><input type="file" name="filePath" onChange="url.value=this.value;" style="cursor:hand;filter:alpha(opacity=100);width:30px; border:1px solid"/>
<input type="button" value="上传" onclick="frmsubmit();">
<div>
<pre>
所有支持的文件类型――wwww
1.图片类：.gif|.jpg|.png

</pre>
</div>
</form>
</body>
</html>
